!function(){"use strict";angular.module("gg.editableText",[])}(),function(){"use strict";angular.module("gg.editableText").directive("editableText",["$timeout","EditableTextHelper",function(a,b){return{scope:{editableText:"=",editMode:"=",placeholder:"@",onChange:"&"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}"><input ng-show="isEditing" ng-blur="isEditing=false;" ng-keypress="($event.which === 13) && (isEditing = false)" ng-model="editingValue" placeholder="{{placeholder}}"/><span ng-hide="isEditing || isWorking" class="original-text" tabindex="0" ng-click="isEditing=true" ng-focus="isEditing=true;">{{placeholder ? (editingValue ? editingValue : placeholder) : editingValue}}</span><span ng-hide="isEditing" ng-transclude></span><span ng-show="isWorking" class="'+b.workingClassName+'">'+b.workingText+"</span></span>",link:function(b,c,d){var e,f=c.find("input");b.isEditing=!!b.editMode,b.editingValue=b.editableText,c.addClass("gg-editable-text"),b.$watch("isEditing",function(g,h){var i,j=f[0];void 0!==d.editMode&&(b.editMode=g),c[g?"addClass":"removeClass"]("editing"),g?a(function(){j.focus(),j.selectionStart=j.selectionEnd=b.editingValue?b.editingValue.length:0}):d.onChange&&g!==h&&b.editingValue!=e?(i=b.onChange({value:b.editingValue}),i&&i.then?(b.isWorking=!0,i.then(function(a){b.editableText=b.editingValue=a,b.isWorking=!1},function(){b.editingValue=b.editableText,b.isWorking=!1})):i?b.editableText=b.editingValue=i:b.editingValue=b.editableText):b.editableText=b.editingValue}),b.$watch("editMode",function(a){b.isEditing=!!a}),b.$watch("editableText",function(a){e=a,b.editingValue=a})}}}])}(),function(){angular.module("gg.editableText").provider("EditableTextHelper",function(){var a="Working..",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}})}();